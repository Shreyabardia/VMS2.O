<div class="space-y-6 animate-fade-in">
  <!-- Page Header -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between">
    <div>
      <h1 class="text-2xl sm:text-3xl font-bold text-gray-900">
        Change Password
      </h1>
      <p class="text-gray-600 mt-1">Update your account password securely</p>
    </div>
    <div class="mt-4 sm:mt-0 flex items-center space-x-2">
      <button
        routerLink="/admin/edit-user"
        class="flex items-center space-x-2 px-4 py-2 rounded-xl bg-gradient-to-r from-purple-600 to-indigo-600 text-white hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105"
      >
        <i class="fas fa-users"></i>
        <span>Manage Users</span>
      </button>
    </div>
  </div>

  <!-- Security Notice -->
  <div class="glass-effect rounded-xl p-6 border-l-4 border-yellow-500">
    <div class="flex items-start space-x-4">
      <div
        class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0"
      >
        <i class="fas fa-shield-alt text-yellow-600 text-xl"></i>
      </div>
      <div>
        <h4 class="text-lg font-semibold text-gray-900 mb-2">
          Security Guidelines
        </h4>
        <p class="text-gray-600 text-sm leading-relaxed">
          To better protect your account, ensure your password is memorable but
          difficult for others to guess. Never share your password and avoid
          reusing previous passwords. Your new password must be at least 8
          characters long and contain a combination of uppercase, lowercase
          letters, numbers, and special characters.
        </p>
      </div>
    </div>
  </div>

  <!-- Password Form -->
  <div class="glass-effect rounded-xl p-6 lg:p-8">
    <form
      [formGroup]="changePasswordForm"
      (ngSubmit)="onSubmit()"
      class="space-y-6"
    >
      <!-- Current Password -->
      <div class="space-y-4">
        <h3
          class="text-lg font-semibold text-gray-900 flex items-center space-x-2"
        >
          <i class="fas fa-key text-blue-500"></i>
          <span>Current Password</span>
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              for="login"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Username</label
            >
            <input
              type="text"
              id="login"
              formControlName="login"
              class="w-full px-4 py-3 rounded-xl border border-gray-300 bg-gray-50 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
              placeholder="Enter your username"
              readonly
            />
          </div>

          <div>
            <label
              for="currentPassword"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Current Password *</label
            >
            <div class="relative">
              <input
                [type]="showCurrentPassword ? 'text' : 'password'"
                id="currentPassword"
                formControlName="currentPassword"
                class="w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
                placeholder="Enter current password"
              />
              <button
                type="button"
                (click)="toggleCurrentPassword()"
                class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600"
              >
                <i
                  [class]="
                    showCurrentPassword ? 'fas fa-eye-slash' : 'fas fa-eye'
                  "
                ></i>
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- New Password -->
      <div class="space-y-4">
        <h3
          class="text-lg font-semibold text-gray-900 flex items-center space-x-2"
        >
          <i class="fas fa-lock text-green-500"></i>
          <span>New Password</span>
        </h3>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label
              for="newPassword"
              class="block text-sm font-medium text-gray-700 mb-2"
              >New Password *</label
            >
            <div class="relative">
              <input
                [type]="showNewPassword ? 'text' : 'password'"
                id="newPassword"
                formControlName="newPassword"
                class="w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
                placeholder="Enter new password"
              />
              <button
                type="button"
                (click)="toggleNewPassword()"
                class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600"
              >
                <i
                  [class]="showNewPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"
                ></i>
              </button>
            </div>
            <div
              *ngIf="
                newPassword?.invalid &&
                (newPassword?.dirty || newPassword?.touched)
              "
              class="mt-2 text-sm text-red-600 space-y-1"
            >
              <div
                *ngIf="newPassword?.errors?.['required']"
                class="flex items-center space-x-2"
              >
                <i class="fas fa-exclamation-circle"></i>
                <span>Password is required</span>
              </div>
              <div
                *ngIf="newPassword?.errors?.['minlength']"
                class="flex items-center space-x-2"
              >
                <i class="fas fa-exclamation-circle"></i>
                <span>Password must be at least 8 characters long</span>
              </div>
              <div
                *ngIf="newPassword?.errors?.['strong']"
                class="flex items-center space-x-2"
              >
                <i class="fas fa-exclamation-circle"></i>
                <span
                  >Password must contain uppercase, lowercase, numbers, and
                  special characters</span
                >
              </div>
            </div>
          </div>

          <div>
            <label
              for="confirmPassword"
              class="block text-sm font-medium text-gray-700 mb-2"
              >Confirm New Password *</label
            >
            <div class="relative">
              <input
                [type]="showConfirmPassword ? 'text' : 'password'"
                id="confirmPassword"
                formControlName="confirmPassword"
                class="w-full px-4 py-3 pr-12 rounded-xl border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"
                placeholder="Confirm new password"
              />
              <button
                type="button"
                (click)="toggleConfirmPassword()"
                class="absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-gray-600"
              >
                <i
                  [class]="
                    showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'
                  "
                ></i>
              </button>
            </div>
            <div
              *ngIf="
                changePasswordForm.hasError('passwordMismatch') &&
                (confirmPassword?.dirty || confirmPassword?.touched)
              "
              class="mt-2 text-sm text-red-600 flex items-center space-x-2"
            >
              <i class="fas fa-exclamation-circle"></i>
              <span>Passwords do not match</span>
            </div>
          </div>
        </div>

        <!-- Password Strength Indicator -->
        <div class="bg-blue-50 rounded-xl p-4">
          <h4 class="text-sm font-medium text-blue-900 mb-3">
            Password Requirements:
          </h4>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            <div class="flex items-center space-x-2">
              <i class="fas fa-check text-green-500"></i>
              <span class="text-sm text-blue-700">Minimum 8 characters</span>
            </div>
            <div class="flex items-center space-x-2">
              <i class="fas fa-check text-green-500"></i>
              <span class="text-sm text-blue-700"
                >Uppercase and lowercase letters</span
              >
            </div>
            <div class="flex items-center space-x-2">
              <i class="fas fa-check text-green-500"></i>
              <span class="text-sm text-blue-700"
                >Numbers and special characters</span
              >
            </div>
            <div class="flex items-center space-x-2">
              <i class="fas fa-check text-green-500"></i>
              <span class="text-sm text-blue-700">Passwords must match</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Submit Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 pt-6">
        <button
          type="submit"
          [disabled]="changePasswordForm.invalid || isSubmitting"
          class="flex-1 flex items-center justify-center space-x-2 px-6 py-3 rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 transform hover:scale-105"
        >
          <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin"></i>
          <i *ngIf="!isSubmitting" class="fas fa-save"></i>
          <span>{{
            isSubmitting ? "Updating Password..." : "Update Password"
          }}</span>
        </button>

        <button
          type="button"
          (click)="resetForm()"
          class="flex-1 flex items-center justify-center space-x-2 px-6 py-3 rounded-xl border border-gray-300 text-gray-700 font-medium hover:bg-gray-50 transition-all duration-300"
        >
          <i class="fas fa-undo"></i>
          <span>Reset Form</span>
        </button>
      </div>
    </form>
  </div>
</div>
